(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[689],{2360:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/tasks",function(){return a(4508)}])},4508:(e,t,a)=>{"use strict";let s;a.r(t),a.d(t,{default:()=>c});var r=a(5893),n=a(7294),i=a(1163),l=a(3036);a(6557);let o=e=>{let t=new Date(e),a=new Date(t.getTime()+6e4*t.getTimezoneOffset()),s=String(a.getDate()).padStart(2,"0"),r=String(a.getMonth()+1).padStart(2,"0"),n=a.getFullYear();return"".concat(s,"/").concat(r,"/").concat(n)},c=(s=()=>{let e=(0,i.useRouter)(),[t,a]=(0,n.useState)([]),[s,c]=(0,n.useState)({title:"",description:"",dueDate:"",status:"Pendiente"}),[u,d]=(0,n.useState)(""),[p,h]=(0,n.useState)(null),[m,g]=(0,n.useState)(null),v=async()=>{try{let e=await l.Z.get("/tasks");a(e.data)}catch(e){console.error("Error fetching tasks:",e),d("Error al obtener las tareas. Int\xe9ntalo de nuevo m\xe1s tarde.")}},k=async()=>{if(!s.title.trim()||!s.description.trim()||!s.dueDate){d("El t\xedtulo, la descripci\xf3n y la fecha de vencimiento son obligatorios.");return}d("");try{await l.Z.post("/tasks",s),v(),c({title:"",description:"",dueDate:"",status:"Pendiente"})}catch(e){console.error("Error creating task:",e),d("Error al crear la tarea. Int\xe9ntalo de nuevo m\xe1s tarde.")}},E=async()=>{if(!s.title.trim()||!s.description.trim()||!s.dueDate){d("El t\xedtulo, la descripci\xf3n y la fecha de vencimiento son obligatorios.");return}if(d(""),p)try{await l.Z.put("/tasks/".concat(p),s),v(),h(null),c({title:"",description:"",dueDate:"",status:"Pendiente"})}catch(e){console.error("Error updating task:",e),d("Error al actualizar la tarea. Int\xe9ntalo de nuevo m\xe1s tarde.")}},x=async e=>{g(e),setTimeout(async()=>{try{await l.Z.delete("/tasks/".concat(e)),v(),g(null),h(null),c({title:"",description:"",dueDate:"",status:"Pendiente"})}catch(e){console.error("Error deleting task:",e),d("Error al eliminar la tarea. Int\xe9ntalo de nuevo m\xe1s tarde.")}},300)},f=e=>{c({title:e.title,description:e.description,dueDate:e.dueDate,status:e.status}),h(e.id)};return(0,n.useEffect)(()=>{let e=()=>{localStorage.removeItem("token")};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[]),(0,n.useEffect)(()=>{v()},[]),(0,n.useEffect)(()=>{v()},[]),(0,r.jsxs)("div",{className:"container",children:[(0,r.jsx)("h2",{className:"heading",children:"Tareas"}),(0,r.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),e.push("/auth")},className:"logoutButton",children:"Cerrar Sesi\xf3n"}),u&&(0,r.jsx)("p",{className:"errorMessage",children:u}),(0,r.jsx)("div",{className:"taskContainer",children:t.map(e=>(0,r.jsxs)("div",{className:"taskCard ".concat(m===e.id?"scale-out-center":""),children:[(0,r.jsx)("h3",{className:"taskTitle",children:e.title}),(0,r.jsx)("p",{className:"taskDescription",children:e.description}),(0,r.jsxs)("p",{className:"taskDueDate",children:["Fecha de vencimiento: ",o(e.dueDate)]}),(0,r.jsxs)("p",{className:"taskStatus",children:["Estado: ",e.status]}),(0,r.jsx)("button",{onClick:()=>x(e.id),className:"deleteButton",children:"Eliminar"}),(0,r.jsx)("button",{onClick:()=>f(e),className:"editButton",children:"Editar"})]},e.id))}),(0,r.jsxs)("div",{className:"formContainer",children:[(0,r.jsx)("input",{type:"text",placeholder:"T\xedtulo",value:s.title,onChange:e=>c({...s,title:e.target.value}),className:"input"}),(0,r.jsx)("input",{type:"text",placeholder:"Descripci\xf3n",value:s.description,onChange:e=>c({...s,description:e.target.value}),className:"input"}),(0,r.jsx)("input",{type:"date",placeholder:"Fecha de Vencimiento",value:s.dueDate,onChange:e=>c({...s,dueDate:e.target.value}),className:"input"}),(0,r.jsxs)("select",{value:s.status,onChange:e=>c({...s,status:e.target.value}),className:"input",children:[(0,r.jsx)("option",{value:"Pendiente",children:"Pendiente"}),(0,r.jsx)("option",{value:"En progreso",children:"En progreso"}),(0,r.jsx)("option",{value:"Completada",children:"Completada"})]}),(0,r.jsx)("button",{onClick:p?E:k,className:"createButton",children:p?"Actualizar Tarea":"Crear Tarea"})]})]})},e=>{let t=(0,i.useRouter)(),[a,l]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{localStorage.getItem("token")?l(!1):t.push("/auth")},[t]),a)?(0,r.jsx)("div",{children:"Cargando..."}):(0,r.jsx)(s,{...e})})},3036:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let s=a(7066).Z.create({baseURL:"http://localhost:3000"});s.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let r=s},6557:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[143,888,774,179],()=>t(2360)),_N_E=e.O()}]);